<view class="container">
  <!-- Loading State -->
  <view wx:if="{{loading}}" class="loadingContainer">
    <text class="loadingText">加载中...</text>
    <!-- Add a custom loading animation here if desired -->
  </view>

  <!-- Error State (Simplified) -->
  <view wx:elif="{{error}}" class="errorContainer">
    <text class="errorText">{{error}}</text>
    <button bindtap="loadSequenceData" data-level="{{level}}">重试</button>
  </view>

  <!-- Main Content -->
  <block wx:else>
    <view class="header">
      <view bindtap="handleBack" class="backButton">
        <text class="backButtonText">←</text>
      </view>
      <text class="headerTitle">{{currentSequence.name.zh}} - {{currentPoseIndex + 1}}/{{currentSequence.poses.length}}</text>
      <view class="placeholderView" />
    </view>

    <view class="poseContainer">
      <image 
        class="poseImg" 
        src="{{currentSequence.poses[currentPoseIndex].image_url}}" 
        mode="aspectFit"
      />
      <text class="poseName">{{currentSequence.poses[currentPoseIndex].displayName || currentSequence.poses[currentPoseIndex].name.zh}}</text>
      <text class="poseInstructions">{{currentSequence.poses[currentPoseIndex].instructions.zh}}</text>
      <text class="timerText">{{timeRemaining}}s</text>
    </view>
    <view class="controlsContainer">
      <view bindtap="togglePlayPause" class="controlButton">
        <text class="controlButtonText">{{isPlaying ? '❚❚' : '▶'}}</text>
      </view>
      <view bindtap="handleNext" class="controlButton">
        <text class="controlButtonText">▶▶</text>
      </view>
    </view>
  </block>
</view>
